<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Checkout page</title>
</head>
<style>
*{
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  font-family:serif;
  
}

body {
    /* background: linear-gradient(180deg, #f0f0f0, #a28089); */
    background: rgb(204, 203, 203);
  padding: 20px;
  
}

.checkout-container {
  display: flex;
  flex-wrap: wrap;
  gap: 20px;
  margin-bottom: 50px;
}

.left-section {
  flex: 1;
  min-width: 500px;
  background: linear-gradient(180deg, #f0f0f0, #a28089);
  padding: 20px;
  border-radius: 10px;
  position: sticky;
  top: 20px;
  height: auto;
}

.right-section-wrapper {
  flex: 2;
  min-width: 791px;
  background: linear-gradient(180deg, #f0f0f0, #a28089);
  padding: 20px;
  border-radius: 10px;
}
.right-section-wrapper h2{
    margin-bottom: 10px;
}

form input {
  display: block;
  width: 100%;
  margin-bottom: 15px;
  padding: 10px;
  border: 1px solid #ccc;
  border-radius: 5px;
}

.payment-methods {
  margin: 20px 0;
}

.payment-methods label {
  display: block;
  margin-bottom: 10px;
}

 #save-address-btn {
  background: #ff3f6c;
  color: white;
  padding: 15px;
  width: 100%;
  border: none;
  border-radius: 5px;
  font-size: 16px;
  cursor: pointer;
  margin-bottom: 20px;
}

 #save-address-btn:hover {
  background: #e73362;
}

.cart-item {
  display: flex;
  align-items: center;
  margin-bottom: 15px;
}

.cart-item img {
  border-radius: 5px;
  margin-right: 15px;
}

.item-details p {
  margin-bottom: 5px;
  font-weight: 700;
}
.item-details{
  padding: 50px;
}
.price-details {
  border-top: 1px solid #ccc;
  padding-top: 15px;
  margin-top: 20px;
}

.price-details p, .price-details h3 {
  margin-bottom: 10px;
}
.price-details p{
    display: none;
}
.preview{
    height: 250px;
    width: 250px;
}
.address{
    padding-left: 13px;
    width: 100%;
    margin-top: 8px;
    margin-bottom: 8px;
}
.type{
    font-size: 12px;
    color: #878787;
    margin-bottom: 10px;

}
p{
    display: block;
    margin-block-start: 1em;
    margin-block-end: 1em;
    margin-inline-start: 0px;
    margin-inline-end: 0px;
    unicode-bidi: isolate;
}
.section{
    margin-bottom: 16px;
    width: 100%;
}

.section label {
  display: inline-flex;
  align-items: center;
  font-size: 14px;
  cursor: pointer;
  
}

.section input[type="radio"] {
  margin-right: 8px;
}
.size{
padding-bottom: 10px;
}
.cart-items-container {
  max-height: 400px; /* Adjust this height to fit 2 items perfectly */
  overflow-y: auto;
  margin-bottom: 20px; /* Space before the price details */
}

/* Optional: Smooth scrolling */
.cart-items-container::-webkit-scrollbar {
  width: 6px;
}
.cart-items-container::-webkit-scrollbar-thumb {
  background: #888;
  border-radius: 5px;
}
.cart-items-container::-webkit-scrollbar-thumb:hover {
  background: #555;
}



.details {
    font-family: Arial, sans-serif;
    max-width: 300px;
    margin: 20px ;
    padding: 20px;
    border: 1px solid #e0e0e0;
    border-radius: 5px;
  }


  .details p {
    font-size: 16px;
    color: #666;
    margin: 8px 0;
    display: flex;
    justify-content: space-between;
  }

  .details h3 {
    font-size: 16px;
    color: #333;
    margin: 15px 0 5px;
    display: flex;
    justify-content: space-between;
  }


  .payment-methods{
    font-family: Arial, sans-serif;
    max-width: 300px;
    margin: 20px ;
    padding: 20px;
    border: 1px solid #e0e0e0;
    border-radius: 5px;
    /* display: none; */
}

  
  .payment-button {
    display: block;
    width: 100%;
    padding: 12px;
    background-color: #000;
    color: white;
    text-align: center;
    text-transform: uppercase;
    font-weight: bold;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    margin-top: 15px;
    margin-bottom: 20px;
  }

  .billing-details {
    display: none;
  }
  .logo {
    width: 32px;
    height: 32px;
    /* padding: 20px; */
    /* margin-left: -80px; */
}

nav{
    width:100vw;
}

.nav__container{
    display:flex;
    justify-content: space-between;
    align-items: center;
}


.nav__menu{
    display: flex;
    align-items: center;
    gap: 10rem;
    margin-right: 200px;

}
.nav__menu a{
    font-size: 0.9rem;
    transition: all 400ms ease;
    text-decoration: none;
    color: #2c2a2a;
    
}
.nav__menu a:hover{
    color: #942542;
}

h0{
    font-size: 18px;
    font-weight: bold;
}

.main-text {
    font-size: 50px;
    margin-left: 30px;
}
.main-text a {
    font-family: 'Brush Script MT', cursive;
    color: #8b5d6a; 
    text-decoration: none; 
}
.main-text h2 {
    text-align: center;
    font-size: 2.5rem;
    margin-top: -80px;
    margin-bottom: 60px;
    color: #3a3a3a;
    letter-spacing: 1px;
    text-transform: uppercase;
}

</style>
<body>
  <div class="container1">
    <nav>
      <div class="container nav__container">
          <img src="./images/threejs.png" alt="logo" class="logo" >
          <ul class="nav__menu">
              <a href="main.html"><h0>Home</h0></a>
              <a href="products.html"><h0>Products</h0></a>
              <a href="#" id="profile-link"><h0>Profile</h0></a>
          </ul>
      </div>
  </nav>
  <div class="main-text">
    <a href="/index.html">BRO <br/>HOOD</a>  
    <h2>Checkout</h2>
  </div>
  </div>
    <div class="checkout-container">
  <!-- In your checkout.html -->
<div class="checkout-container">
  <div class="left-section">
    <h2>Order Details</h2>
    <div class="cart-items-container" id="cart-items-container">
      <div class="cart-item">
        <img id="product-image" src="" class="preview" alt="T-shirt">
        <div class="item-details">
          <p id="product-name"></p>
          <div class="size">
            <label for="size1">Size:</label>
            <select id="size1" name="size1" onchange="updatePrice()">
              <option value="S">S</option>
              <option value="M" selected>M</option>
              <option value="L">L</option>
              <option value="XL">XL</option>
            </select>
          </div>
          <div>
            <label for="qty1">Qty:</label>
            <select id="qty1" name="qty1" onchange="updatePrice()">
              <option value="1" selected>1</option>
              <option value="2">2</option>
              <option value="3">3</option>
            </select>
          </div>
          <p class="item-price" id="price1"></p>
        </div>
      </div>
    </div>
    <!-- Rest of your checkout page... -->

            <div class="price-details">
              <h3>Subtotal: $<span id="subtotal"></span></h3>
              <h3>Total Items:<span id="quantity"></span></h3>
              <p>Total: $<span id="total"></span></p>
            </div>
          </div>
      
          <div class="right-section-wrapper">
          <h2>Delivery Address</h2>
          <form id="address-form">
            <input type="text" placeholder="Full Name" required>
            <input type="text" placeholder="Phone Number" required>
            <input type="text" placeholder="Pincode" required>
            <input type="text" placeholder="Address (House No, Street, Area)" required>
            <input type="text" placeholder="City" required>
            <input type="text" placeholder="State" required>
            <div class="address">
                <p class="type">Address Type</p>
                <div class="section">
                  <label for="home">
                    <input type="radio" name="locationTypeTag" id="home">
                    Home
                  </label>
                  <label for="work" style="margin-left: 20px;">
                    <input type="radio" name="locationTypeTag" id="work">
                    Work
                  </label>
                </div>
              </div>
              
          </form>

          <button id="save-address-btn">SAVE AND DELIVER HERE</button>

          <div class="billing-details">
            <h2>Billing Details</h2>
            <div class="details">
            <p>Subtotal: $<span id="subtotal-billing"></span></p>
            <p>Shipping: $<span id="shipping-billing"></span></p>
            <h3>Total: $<span id="total-billing"></span></h3>
        </div>
            <button class="payment-button" id="rzp-button1">Continue to Payment</button>
          </div>

          
        </div>
        </div>
      
      
        <!-- Modify the cart-items-container section -->
<div class="cart-items-container" id="cart-items-container">
  <!-- Items will be dynamically added here -->
</div>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const urlParams = new URLSearchParams(window.location.search);
    const productId = urlParams.get('id');
    const productName = urlParams.get('name');
    const productPrice = urlParams.get('price');
    const productImage = urlParams.get('image');
    const fromCart = urlParams.get('fromCart');
    
    if (fromCart) {
      // Cart checkout flow
      const cartItems = JSON.parse(localStorage.getItem('cart')) || [];
      const cartContainer = document.getElementById('cart-items-container');
      
      // Clear default single product display
      cartContainer.innerHTML = '';
      
      let subtotal = 0;
      let totalQuantity = 0;
      
      // Add all cart items
      cartItems.forEach((item, index) => {
        const quantity = item.quantity || 1;
        const price = parseInt(item.price.replace('$', '')) * 1;
        subtotal += price * quantity;
        totalQuantity += quantity;
        
        const cartItem = document.createElement('div');
        cartItem.className = 'cart-item';
        cartItem.innerHTML = `
          <img src="./images/${item.image}" class="preview" alt="T-shirt" />
          <div class="item-details">
            <p>${item.name}</p>
            <div class="size">
              <label>Size:</label>
              <select id="size${index}" onchange="updatePrice()">
                <option ${item.size === 'S' ? 'selected' : ''}>S</option>
                <option ${item.size === 'M' ? 'selected' : ''}>M</option>
                <option ${item.size === 'L' ? 'selected' : ''}>L</option>
                <option ${item.size === 'XL' ? 'selected' : ''}>XL</option>
              </select>
            </div>
            <div>
              <label>Qty:</label>
              <select id="qty${index}" onchange="updatePrice()">
                <option value="1" ${quantity === 1 ? 'selected' : ''}>1</option>
                <option value="2" ${quantity === 2 ? 'selected' : ''}>2</option>
                <option value="3" ${quantity === 3 ? 'selected' : ''}>3</option>
              </select>
            </div>
            <p class="item-price">$${price}</p>
          </div>
        `;
        cartContainer.appendChild(cartItem);
      });
      
      // Set initial prices
      updatePrice();
    }
    else if (productId && productName && productPrice) {
      // Single product checkout flow
      document.getElementById('product-name').textContent = decodeURIComponent(productName);
      document.getElementById('price1').textContent = `$${productPrice}`;
      document.getElementById('product-image').src = `./images/${decodeURIComponent(productImage)}`;
      updatePrice();
    }
  });
  
  function updatePrice() {
    const urlParams = new URLSearchParams(window.location.search);
    const fromCart = urlParams.get('fromCart');
    let subtotal = 0;
    let totalQuantity = 0;
    const shipping = 50;
    
    if (fromCart) {
      // Calculate prices for cart checkout
      const cartItems = JSON.parse(localStorage.getItem('cart')) || [];
      
      cartItems.forEach((item, index) => {
        const qtySelect = document.getElementById(`qty${index}`);
        const quantity = qtySelect ? parseInt(qtySelect.value) : (item.quantity || 1);
        const price = parseInt(item.price.replace('$', '')) * 100;
        subtotal += price * quantity;
        totalQuantity += quantity;
      });
    } else {
      // Calculate prices for single product checkout
      const qty = parseInt(document.getElementById('qty1').value);
      const price = parseInt(document.getElementById('price1').textContent.replace('$', ''));
      subtotal = price * qty;
      totalQuantity = qty;
    }
    
    const total = subtotal + shipping;
    
    // Update all displayed prices
    document.getElementById('subtotal').textContent = subtotal;
    document.getElementById('total').textContent = total;
    document.getElementById('quantity').textContent = totalQuantity;
    document.getElementById('subtotal-billing').textContent = subtotal;
    document.getElementById('total-billing').textContent = total;
    document.getElementById('shipping-billing').textContent = shipping;
    
    return total;
  }
  

</script>
<script >
  
  document.getElementById('save-address-btn').addEventListener('click', function() {
    // Validate form
    const form = document.getElementById('address-form');
    const inputs = form.querySelectorAll('input[required]');
    let isValid = true;
    
    inputs.forEach(input => {
      if (!input.value) {
        isValid = false;
        input.style.borderColor = 'red';
      } else {
        input.style.borderColor = '#ccc';
      }
    });
  
    if (isValid) {
      document.querySelector('.billing-details').style.display = 'block';
      this.style.display = 'none'; // Hide the save button
      alert('Address saved successfully!');
    } else {
      alert('Please fill all required fields');
    }
  });



</script>
<script src="https://checkout.razorpay.com/v1/checkout.js"></script>
<script>
    var options = {
    "key": "rzp_live_enhKCZBsCWX8iD", // Enter your Razorpay Key ID
    "currency": "INR",
    "name": "Your Business Name",
    "image": "https://example.com/your_logo",
    "handler": function (response){
        alert("Payment successful! Payment ID: " + response.razorpay_payment_id);
        // You can add redirect or other success logic here
    },
    "prefill": {
        "name": "", // These can be populated from your form
        "email": "", 
        "contact": ""
    },
    "theme": {
        "color": "#a28089"
    }
};
  var rzp1 = new Razorpay(options);
  rzp1.on('payment.failed', function (response){
          alert(response.error.code); 
          alert(response.error.description);
          alert(response.error.source);
          alert(response.error.step);
          alert(response.error.reason);
          alert(response.error.metadata.order_id);
          alert(response.error.metadata.payment_id);
  });
  document.getElementById('rzp-button1').onclick = function(e){
  // Get the current total amount
  const totalAmount = updatePrice(); // This updates prices and returns total
  
  // Update Razorpay options with dynamic amount
  options.amount = totalAmount * 100; // Convert to paise
  options.description = "Payment for your order";
  
  // Create new instance with updated options
  var rzp1 = new Razorpay(options);
  rzp1.open();
  e.preventDefault();
}
</script>
</body>
</html>